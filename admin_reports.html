<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ISSO Reports - UbianWorld</title>
        <link rel="stylesheet" href="styles.css">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        <script src="script.js" defer></script> 
        <style>
        </style>
    </head>

    <body class="admin-body">
        <header>
            <div class="brand-container">
                <img src="logo.jpg" alt="ISSO Logo" class="header-logo">
                <span class="brand-text">ISSO Staff</span>
            </div>

            <!-- Navigation will be dynamically generated by script.js -->
            <nav>
                <ul>
                    <!-- Navigation will be dynamically generated -->
                </ul>
            </nav>
        </header>

        <main class="container admin-main">
            <h1>ISSO Administrative Reports</h1>
            <p style="margin-bottom: 2rem; color: #555;">Real-time overview of system activity, compliance status, and student records (DFD 5.0).</p>

            <section class="report-section">
                <h2>üìä System Metrics Overview</h2>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: 2rem;">
                    <button class="secondary-button" onclick="window.location.href='admin_dashboard.html'">‚Üê Back to Dashboard</button>
                    <button class="cta-button" onclick="loadReportData()">Refresh Data</button>
                </div>

                <div id="report-data-container" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <p>Loading data...</p>
                </div>
            </section>
        </main>

        <footer>
            <div class="container footer-content">
                <div class="footer-col">
                    <h3>About UbianWorld</h3>
                    <p>Your go-to platform for university support...</p>
                </div>
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="announcement.html">Announcements</a></li>
                        <li><a href="guides.html">Guides & Forms</a></li>
                        <li><a href="support.html">Support</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Contact Us</h3>
                    <p>Email: info@ubianworld.edu.ph</p>
                    <p>Phone: +63 123 456 7890</p>
                    <p>Address: University of Batangas, Batangas City, Philippines</p>
                </div>
            </div>
        </footer>

        <script>
            async function loadReportData() {
                const container = document.getElementById('report-data-container');
                container.innerHTML = '<p>Loading report data...</p>';
                
                try {
                    const result = await window.apiCall('api/generate_report.php');
                    
                    if (result && result.success) {
                        container.innerHTML = `
                            <h3>Report Generated: ${new Date().toLocaleString()}</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                                <div style="background: #f0f9ff; padding: 1.5rem; border-radius: 8px;">
                                    <h4>Total Students</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #0369a1;">${result.totalStudents || 0}</p>
                                </div>
                                <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 8px;">
                                    <h4>Total Inquiries</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #15803d;">${result.totalInquiries || 0}</p>
                                </div>
                                <div style="background: #fef3c7; padding: 1.5rem; border-radius: 8px;">
                                    <h4>Pending Inquiries</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #a16207;">${result.pendingInquiries || 0}</p>
                                </div>
                                <div style="background: #fce7f3; padding: 1.5rem; border-radius: 8px;">
                                    <h4>Documents Submitted</h4>
                                    <p style="font-size: 2rem; font-weight: bold; color: #9f1239;">${result.totalDocuments || 0}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        container.innerHTML = '<p style="color: red;">Error loading report data.</p>';
                    }
                } catch (error) {
                    console.error('Report error:', error);
                    container.innerHTML = '<p style="color: red;">Error loading report data.</p>';
                }
            }
            
            // Auto-load on page load
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', loadReportData);
            } else {
                loadReportData();
            }
        </script>
    </body>
</html>
